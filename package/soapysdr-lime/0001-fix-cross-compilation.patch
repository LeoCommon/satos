From 1a2e6a577d5904b36da5872e3fead2e21f61461d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Martin=20B=C3=B6h?= <contact@martb.dev>
Date: Mon, 17 Nov 2025 16:15:14 +0100
Subject: [PATCH] fix cross compilation

---
 CMakeLists.txt               | 4 ----
 src/streaming/CMakeLists.txt | 2 +-
 2 files changed, 1 insertion(+), 5 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index db6f3314..6b16efea 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -108,10 +108,6 @@ if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
     if(CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 9.3 OR CMAKE_CXX_COMPILER_VERSION VERSION_EQUAL 9.9)
         add_compile_options($<$<NOT:$<CONFIG:Debug>>:-fno-caller-saves>)
     endif()
-
-    if(CMAKE_HOST_SYSTEM_PROCESSOR STREQUAL "x86_64") # limit CPU extensions usage to generate portable binaries
-        add_compile_options(-march=x86-64)
-    endif()
 endif()
 
 if(CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
diff --git a/src/streaming/CMakeLists.txt b/src/streaming/CMakeLists.txt
index 998ae94e..98120f16 100644
--- a/src/streaming/CMakeLists.txt
+++ b/src/streaming/CMakeLists.txt
@@ -5,6 +5,6 @@ target_sources(
 add_executable(samplesConversionPerfTest main.cpp samplesConversion.cpp)
 target_link_libraries(samplesConversionPerfTest limesuiteng)
 if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
-    target_compile_options(samplesConversionPerfTest PUBLIC -Wall -Wpedantic -O3 -march=native)
+    target_compile_options(samplesConversionPerfTest PUBLIC -Wall -Wpedantic)
     #target_compile_options(samplesConversionPerfTest PUBLIC -fopt-info-vec-all)
 endif()
-- 
2.51.1

